<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard - Puthal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary-purple: #6A62D2;
      --text-dark: #1E1E1E;
      --text-light: #555;
      --border-light: #EAEAEA;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #FFFFFF;
      color: var(--text-dark);
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      border-bottom: 1px solid var(--border-light);
    }
    .logo {
      font-size: 28px;
      font-weight: 700;
      display: flex;
      align-items: center;
    }
    .logo span {
      background-color: var(--primary-purple);
      color: white;
      width: 36px;
      height: 36px;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      border-radius: 8px;
      margin-right: 10px;
      font-weight: 600;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 40px;
    }
    nav a {
      text-decoration: none;
      color: var(--text-light);
      font-weight: 500;
      font-size: 16px;
    }
    nav a.active {
      color: var(--text-dark);
      font-weight: 600;
    }
    .dashboard-content {
      text-align: center;
      padding: 100px 20px;
    }
    .dashboard-content h1 {
      font-size: 48px;
      color: var(--text-dark);
      font-weight: 700;
      margin-bottom: 15px;
    }
    .dashboard-content p {
      font-size: 18px;
      color: var(--text-light);
      margin-top: 10px;
    }
    #userInfo a {
      color: var(--primary-purple);
      font-weight: 600;
      text-decoration: underline;
    }
    /* Toast notification for logout */
    .logout-toast {
      position: fixed;
      top: 12px;
      right: 24px;
      background: #32a852;
      color: #fff;
      padding: 15px 24px;
      border-radius: 8px;
      font-weight: 500;
      font-size: 16px;
      z-index: 999;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <span>P</span> Puthal
      </div>
      <nav>
        <ul id="navLinks">
          <!-- Navigation links dynamically inserted -->
        </ul>
      </nav>
    </header>
    <main class="dashboard-content" id="dashboardContent">
      <h1 id="welcomeHeading">Dashboard</h1>
      <p id="welcomeSubheading">This is your personal space. More features coming soon!</p>
      <p id="userInfo"></p>
    </main>
    <!-- Logout toast -->
    <div class="logout-toast" id="logoutToast">You have successfully logged out.</div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBOhAUsXApTxxwUCDFJ3Dky99WVgTlOLWw",
      authDomain: "internship-4a323.firebaseapp.com",
      projectId: "internship-4a323",
      storageBucket: "internship-4a323.appspot.com",
      messagingSenderId: "953845773650",
      appId: "1:953845773650:web:a31bed78777aeb7b61368b",
      measurementId: "G-4Y753MCEG5"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const navLinks = document.getElementById('navLinks');
    const dashboardContent = document.getElementById('dashboardContent');
    const welcomeHeading = document.getElementById('welcomeHeading');
    const welcomeSubheading = document.getElementById('welcomeSubheading');
    const userInfo = document.getElementById('userInfo');
    const logoutToast = document.getElementById('logoutToast');

    const quotes = [
      "Today is a new day to care for your mind.",
      "Progress is progress, no matter how small.",
      "You are stronger than you think.",
      "Your feelings are valid.",
      "Be kind to yourself, you're doing your best."
    ];

    onAuthStateChanged(auth, user => {
      if (user) {
        // User is logged in
        dashboardContent.style.display = 'block';
        navLinks.innerHTML = `
          <li><a href="./index.html">Home</a></li>
          <li><a href="./about.html">About</a></li>
          <li><a href="./features.html">Features</a></li>
          <li><a href="./dashboard.html" class="active">Dashboard</a></li>
          <li><a href="./contact.html">Contact</a></li>
          <li><a href="#" id="logoutLink">Logout</a></li>
        `;
        // Logout event with feedback toast
        document.getElementById('logoutLink').addEventListener('click', e => {
          e.preventDefault();
          signOut(auth).then(() => {
            logoutToast.style.display = "block";
            setTimeout(() => {
              logoutToast.style.display = "none";
              window.location.href = "./login.html";
            }, 1200);
          })
          .catch((error) => {
            // Handle error if needed
            alert("Error logging out. Please try again.");
          });
        });

        // Personalized welcome
        const userName = user.displayName || '';
        const userEmail = user.email || '';
        welcomeHeading.textContent = `Welcome, ${userName || userEmail || "User"}`;
        welcomeSubheading.textContent = quotes[Math.floor(Math.random() * quotes.length)];
  userInfo.innerHTML = `Signed in as <strong>${userEmail}</strong>.<br>Phone: <strong>1234567890</strong>`;

      } else {
        // Not logged in - redirect to login
        window.location.href = "./login.html";
      }
    });
  </script>
</body>
</html>
